ITEM 7. Management's Discussion and Analysis of Financial Condition and Results of Operations
You should read the following discussion and analysis of our financial condition and results of operations together with the consolidated financial statements and related notes that are included elsewhere in this Annual Report on Form 10-K. This discussion contains forward-looking statements based upon current plans, expectations, and beliefs that involve risks and uncertainties. Our actual results may differ materially from those anticipated in these forward-looking statements as a result of various factors, including those set forth under “Risk Factors” and in other parts of this Annual Report on Form 10-K. Our fiscal year ends on December 31.
As used herein, "Fastly," "we," "our," "the Company" and similar terms include Fastly, Inc. and its subsidiaries, unless the context indicates otherwise.
Overview
Developers are reinventing the way we live, work, and play online. Yet they repeatedly encounter innovation barriers when delivering modern digital experiences. Expectations for digital experiences are at an all-time high; they must be fast, secure, and highly personalized. If they aren’t reliable, end-users simply take their business elsewhere. The challenge today is enabling developers to deliver a modern digital experience while simultaneously providing scale, security, and performance. We built our edge cloud platform to solve this problem.
The edge cloud is an emerging category of Infrastructure as a Service ("IaaS") that enables developers to build, secure, and deliver digital experiences, at the edge of the internet. This service represents the convergence of the Content Delivery Network ("CDN") with functionality that has been traditionally delivered by hardware-centric appliances such as Application Delivery Controllers ("ADC"), Web Application Firewalls ("WAF"), Bot Detection, Distributed Denial of Service ("DDoS") and observability solutions. It also includes the emergence of a new, but growing, edge computing market which aims to move compute power and logic as close to the end-user as possible. The edge cloud uses the emerging cloud computing, serverless paradigm in which the cloud provider runs the server and dynamically manages the allocation of machine resources while offering flexibility and control to developers. When milliseconds matter, processing at the edge is an ideal way to handle highly dynamic and time-sensitive data. This has led to its acceptance and adoption by organizations who monetize or grow their user base with every millisecond saved. Organizations that want their websites to load faster for every user can benefit from processing at the edge. The edge cloud complements data center, central cloud, and hybrid solutions.
Our mission is to fuel the next modern digital experience by providing developers with a programmable and reliable edge cloud platform that they adopt as their own.
Organizations must keep up with complex and ever-evolving end-user requirements. We help them surpass their end-users’ expectations by powering fast, secure, and scalable digital experiences. We built a powerful edge cloud platform, designed from the ground up to be programmable and support agile software development. We believe our platform gives our customers a significant competitive advantage, whether they were born into the digital age or are just embarking on their digital transformation journey. Our platform consists of four key components: a programmable edge, a software-defined modern network, safety in depth, and a philosophy of customer empowerment. Our programmable edge provides developers with real-time visibility and granular control, where they can write and deploy code in a serverless environment and to push application logic to the edge. It provides tooling and templates to deploy some of the most commonly used workflows and leverages modern application delivery processes, thus freeing developers to innovate without constraints. Our software-defined modern network is built for the software-defined future. It is powerful, efficient, and flexible, designed to enable us to rapidly scale to meet the needs of the most demanding customers and never be a barrier to their growth. Our 184 terabit software-centric network is located across 71 markets as of December 31, 2021.We define markets as unique metropolitan areas where we have one or more Points of Presence ("POPs"). Our safety in depth approach integrates security into multiple layers of development: architecture, engineering, and operations. That's why we invest in building security into the fabric of our platform, alongside performance. We provide developers and security operations teams with a fast, safe environment to create, build, and run modern applications.
Our platform provides developers and security operations teams with solutions that foster innovation without impacting performance. Finally, being developers ourselves, we empower customers to build great things while supporting their efforts through frictionless tools and a deeply technical support team that facilitates ongoing collaboration.
We serve both established enterprises, mid-market companies and technology-savvy organizations. Our customers represent a diverse set of organizations across many industries with one thing in common: they are competing by using the power of software to build differentiation at the edge. With our edge cloud platform, our customers are disrupting existing industries and creating new ones. For example, several of our customers have reinvented digital publishing by connecting readers through subscription models to indispensable content, helping people understand the world through deeply reported independent journalism. Our customers’ software applications use our edge cloud platform to deliver consistently excellent online shopping experiences, fast and more secure financial transactions, and broadcast quality live streaming on any device. The range of applications that developers build with our edge cloud platform continues to expand rapidly.
So where do we go from here? Our vision is to create a trustworthy internet, where good thrives. We want all developers to have the ability to deliver the next transformative digital experience on a global scale. And because big ideas often start small, we love it when developers experiment and iterate on our edge cloud platform, coming up with exciting new ways to solve today’s complex problems.
We generate substantially all of our revenue from charging our customers based on their usage of our platform. Initially, customers typically choose to become platform customers, for which we charge fees based on their committed or actual use of our platform, as measured in gigabytes and requests. Many of our customers generate billings in excess of their minimum commitment. We also generate revenue from additional products as well as professional and other services, such as implementation. We charge a flat one-time or recurring fee for these additional products and services. Beginning in the fourth quarter of 2020, we also began offering subscriptions to access a unified security web application and application programming interface at a fixed rate.
We focus our direct selling efforts on medium to large organizations as well as smaller companies that are exhibiting significant growth. We engage with and support these customers with our field sales representatives, account managers, and technical account managers who focus on customer satisfaction and drive expansion of their usage of our platform and products. These teams work with technical and business leaders to help our customers’ end-users receive the best possible digital experience, while also lowering our customers’ total cost of ownership.
These direct selling efforts are reflected by our 445 enterprise customers as of December 31, 2021 that generated 88% of our total revenue for the 12 months ended December 31, 2021, up from 378 enterprise customers which generated 89% of our revenue for the 12 months ended December 31, 2020. Enterprise customers are defined as customers with revenue in excess of $100,000 over the previous 12-month period.
Our Dollar-Based Net Expansion Rate ("DBNER"), Net Retention Rate ("NRR") and Last-Twelve Months Net Retention Rate ("LTM NRR") metrics measure the revenue growth from existing customers attributable to increased usage of our platform and features, and purchase of additional products and services.
The financial results of Signal Sciences have been consolidated into our financial results and key metrics since October 1, 2020, the date of acquisition. Our DBNER was 120.9% and 143.6% for the 12 months ended December 31, 2021, and 2020, respectively. Our NRR was 106.6% and 116.3% for the twelve months ended December 31, 2021 and 2020, respectively. Our LTM NRR was 117.6% and 137.4% for the 12 months ended December 31, 2021 and 2020, respectively. We believe the LTM NRR is supplemental as it removes some of the volatility inherent in a usage-based business model from the measurement of the NRR metric.
We believe that an annual cohort analysis of Fastly's customers as depicted in the chart below, demonstrates the continued expansion of our customers' use of our platform. Once a customer begins to generate revenue for us, they tend to increase their usage of our platform, in particular in their second year. Customer accounts acquired in 2017, 2018, 2019, 2020 and 2021 are referred to as the 2017 Cohort, 2018 Cohort, 2019 Cohort, 2020 Cohort and 2021 Cohort, respectively. Our 2017 Cohort increased its revenue 2.3 times after its first year and has grown at approximately a 50% CAGR over the last four years.
In 2017, we generated $5.6 million of revenue from the 2017 Cohort. Revenue from the 2017 Cohort grew to $16.8 million in 2018, representing 200% year-over-year growth. In 2018, we generated $11.2 million of revenue from the 2018 Cohort. Revenue from the 2018 Cohort grew to $34.4 million in 2019, representing 207% year-over-year growth. In 2019, we generated $9.1 million of revenue from the 2019 Cohort. Revenue from the 2019 Cohort grew to $47.7 million in 2020,
representing 424% year-over-year growth. Revenue from the 2020 Cohort grew to $28.9 million in 2021, representing 144% year-over-year growth.
Summary of Revenue Generated by Customer Cohorts Over Time (in millions):
Customers that have negotiated contracts with us generate a substantial majority of our revenue. These customers typically purchase one or more products, for which we charge a monthly recurring or one-time fee depending on the products selected. Some of these customers also choose to purchase various levels of account management and enhanced customer support for a monthly fee. Typically, the term of these contracts is 12 months and includes a minimum monthly billing commitment in exchange for more favorable pricing terms. Many of these customers generate billings in excess of their minimum commitment. In addition, customers can sign up online by providing their credit card information and agreeing to a minimum monthly fee. Beginning in the fourth quarter of 2020, we also offer subscriptions to access a unified security web application and application programming interface at a fixed rate.
The majority of our revenue is usage based and changes in usage by our largest customers can create volatility in our revenue. The length of our sales cycle, from initial evaluation to payment, can range from several months to well over a year and can vary substantially from customer to customer. Similarly, the onboarding and ramping process with new enterprise customers can take several months, as well as existing enterprise customers with new business, can take several months and can be subject to delays for unanticipated reasons. For example, we experienced delays in the ramping of new traffic due to travel and data center restrictions in South Asia that delayed network build outs and the timing of customer code freezes, each affected in part by COVID-19-related issues. The timing of new revenue from our sales efforts and changes in usage by our largest customers can make revenue difficult to predict.
For the years ended December 31, 2021 and 2020, our revenue was $354.3 million and $290.9 million, respectively. Our 10 largest customers generated an aggregate of 33% and 38% of our revenue in the 12 months ended December 31, 2021 and 2020, respectively. We incurred a net loss of $222.7 million and $95.9 million in the years ended December 31, 2021 and 2020, respectively.
Acquisition of Signal Sciences
On October 1 2020, we acquired Signal Sciences, for an aggregate purchase price of $759.4 million, consisting of approximately $223.0 million in cash and 6,367,709 shares of our Class A common stock, including 896,499 shares which are restricted as they are subject to revesting conditions. The aggregate purchase price reflects the value of the net shares issued, which excludes the above mentioned shares that are restricted. We also assumed all unvested and outstanding equity awards of Signal Sciences’ continuing employees as converted into our equity awards at the conversion ratio provided in the Agreement and Plan of Reorganization (the "Merger Agreement"), which became options to purchase 251,754 shares of our Class A common stock, with a value of $20.7 million related to the assumed unvested equity awards that are subject to future service conditions.
We have included Signal Sciences in our results of operations as of the acquisition date, October 1, 2020. For the year ended December 31, 2020, the information presented in this section includes the contribution of Signal Sciences starting from October 1, 2020. For the year ended December 31, 2021, the results include the contribution of Signal Sciences for the full year. As a result, comparisons to the prior-year period may not be indicative of future results or future rates of growth.
Please refer to Note 5-Business Combination for further details on the acquisition of Signal Sciences.
Adjustments subsequent to the release of earnings on February 16, 2022
Subsequent to our announcement of earnings and issuance of our press release, furnished in a Form 8-K on February 16, 2022, for the year ended December 31, 2021, we increased our Property and Equipment, net Other Current Liabilities by $6.9 million to accrue for additional assets received at year-end but not yet paid for or financed. This increased total assets, total current liabilities, total liabilities and total liabilities and stockholders' equity by $6.9 million. These adjustments update balances previously disclosed in our press release for the year ended December 31, 2021.
Factors Affecting Our Performance
Winning New Customers
We are focused on continuing to attract new customers. Our customer base includes both large, established enterprises that are undergoing digital transformation and emerging companies spanning a wide array of industries and verticals. In both instances, developers within these companies often use and advocate the adoption of our platform by their companies. We also benefit from word-of-mouth promotion across the broader developer community. We will continue to invest in our developer outreach, leveraging it as a cost-efficient approach to attracting new customers. With our expanded security portfolio from the acquisition of Signal Sciences, other security products, and our edge computing capabilities we will increase our focus on brand awareness, public relations and analyst relations in efforts to help generate awareness and demand for these offerings. We will continue to dedicate significant resources to sales and marketing programs, including various online marketing activities as well as targeted account-based advertising.
We are continuing to bring new innovations to our edge cloud platform and software-defined modern network architecture, and are seeing an increased interest from customers in our programmable edge computing solution. This will require us to dedicate significant resources to further develop the market for our platform and differentiate our platform from competitive products and services. We will also need to expand, retain, and motivate our sales and marketing personnel in order to target our sales efforts at larger enterprises and senior management of these potential customers.
Many jurisdictions have enacted laws on data localization and cross-border data transfers, and the evolving enforcement and interpretation of such laws has created uncertainty regarding data stored abroad and transferred across borders, which could impact customer growth and acquisition for customers and potential customers conducting business in Europe and elsewhere outside of the United States. We have encountered and may continue to encounter heightened concerns relating to privacy, data protection, and information security from customers and potential customers conducting business outside of the United States. Specifically, we have received more requests relating to EU privacy requirements, impacting the sales negotiation process, and we have had potential customers decline to do business with us due to privacy concerns related to updated interpretations of the laws applicable to transfers of personal information to the United States. For additional details, refer to "Item 1A.-Risk Factors".
Expanding within our Existing Customer Base
We emphasize retaining our customers and expanding their usage of our platform and adoption of our other products. Customers often begin with smaller deployments of one of our products and then expand their usage over time. Our platform includes a variety of offerings, such as load balancing, shielding, web security, and WAF. As our customers mature, we assist them in expanding their use of our platform, including the use of additional offerings beyond edge cloud delivery or security. As enterprises grow and experience increased traffic, their needs evolve, leading them to find additional use cases for our platform and expand their usage accordingly. In addition, given that customer acquisition costs are incurred largely for acquiring and initial onboarding, we gain operating leverage to the extent that existing customers expand their use of our platform and products.
Our ability to retain our customers and expand their usage could be impaired for a variety of reasons, including a customer moving to another provider or reducing usage within the term of their contract to their minimum usage commitment. Even if our customers expand their usage of our platform, we cannot guarantee that they will maintain those usage levels for any meaningful period of time or that they will renew their commitments.
The data localization and cross-border data transfer issues described above also impact current customers' increased usage of our products and services. In addition, we cannot be certain what actions the United States or another country's government may take with respect to certain of our customers that may adversely affect our ability to do business with our customers that operate in China, target China as a market or that have strong business ties to China. For example, our largest customer during the year ended December 31, 2020 had strong business ties to China and significantly reduced its usage of our platform. We believe this was in response to various actions taken by the United States and other governments against them. Further reductions in this customer's traffic levels could have an additional negative impact on our business.
For additional details, refer to "Item 1A.-Risk Factors".
International Customer Growth
We intend to continue expanding our efforts to attract customers outside of the United States by augmenting our sales teams and strategically increasing our presence in the number of markets in select international locations. As of December 31, 2021, our edge network spans across 51 markets and 31 countries that are outside of the United States. As of December 31, 2020, our edge network spans across 40 markets and 25 countries that are outside of the United States.
Our international expansion, including our global sales efforts, continues to add increased complexity and cost to our business. This requires us to expand our sales and marketing capabilities outside of the United States, as well as increase the number of markets we have a presence in around the world to support our customers. Managing the administrative aspects of a global organization places a strain on our business and culture.
Investing in Sales and Marketing
Our customers have been pivotal in driving brand awareness and broadening our reach. While we continue to leverage our self-service approach to drive adoption by developers, we will continue to expand our sales and marketing efforts, with an increased focus on sales to enterprises globally. Utilizing our direct sales force, we have multiple selling points within organizations to acquire new customers and increase usage from our existing customers. We will continue to increase our discretionary marketing spend, including account based and brand spend, to drive the effectiveness of our sales teams. As a result, we expect our total operating expenses to increase as we continue to expand. Our investments in our sales and marketing teams are intended to help accelerate our sales, onboarding, and ramp cycles.
These efforts will require us to invest significantly in financial and other resources. Furthermore, we believe that there is significant competition for sales personnel with the skills and technical knowledge that we require. Our ability to achieve significant revenue growth will depend, in large part, on our success in recruiting, training, and retaining sufficient numbers of sales personnel to support our growth.
Continued Investment in Our Platform and Network Infrastructure
We must continue to invest in our platform and network infrastructure to maintain our position in the market. We expect our revenue growth to be dependent on an expanding customer base and continued adoption of our edge cloud delivery, security, and other products and services. In anticipation of winning new customers and staying ahead of our customers’ needs, we plan to continue to invest in order to expand the scale and capacity of our software-defined modern network, resulting in increased network service provider fees, which could adversely affect our gross margins if we are unable to offset these costs with revenue from new customers and increase revenue from existing customers. Our customers require constant innovation within their own organizations and expect the same from us. Therefore, we will continue to invest in resources to enhance our development capabilities and introduce new products and features on our platform. We believe that investment in research and development will contribute to our long-term growth but may also negatively impact our short-term profitability. For the years ended December 31, 2021 and 2020, our research and development expenses as a percentage of revenue was 36% and 26%, respectively. We may also seek to acquire or invest in businesses, products, or technologies that we believe could complement or expand our platform, enhance our technical capabilities, or otherwise offer growth opportunities. For example, on October 1, 2020, we acquired Signal Sciences, a security software company that provides protection from web, API, and mobile security threats.
Developers use our platform to build custom applications and require a state-of-the-art infrastructure to test and run these applications. We will continue to invest in our network infrastructure by strategically increasing our POPs. We also anticipate making investments in upgrading our technology and hardware to continue providing our customers a fast and secure platform. Our cash additions for investments in property and equipment for the years ended December 31, 2021 and 2020 were $48.6 million and $49.0 million, respectively, representing 14% and 17% of our revenue in such periods. We expect our investment in property and equipment to increase on an absolute basis and may increase as a percentage of revenue in future periods. Our gross margins and operating results are impacted by these investments. As of December 31, 2021, our network is located in 71 markets across 32 countries.
In the event that there are errors in software, failures of hardware, damages to a facility or misconfigurations of any of our services-whether caused by our own error, security breaches, third-party error, or natural disasters-we could experience lengthy interruptions in our platform as well as delays and additional expenses in arranging new facilities and services. In addition, there can be no assurance that we are adequately prepared for unexpected increases in bandwidth demands by our customers, particularly when customers experience cyber-attacks. The bandwidth we have contracted to purchase may become unavailable for a variety of reasons, including service outages, payment disputes, network providers going out of business, natural disasters, networks imposing traffic limits, or governments adopting regulations that impact network operations.
Uncertainty of the Coronavirus (COVID-19) Pandemic
The ongoing global COVID-19 pandemic has adversely impacted, and may continue to adversely impact, many aspects of our business. As certain of our customers or potential customers experience downturns or uncertainty in their own business operations and revenue resulting from the spread of COVID-19, they have and may continue to decrease or delay their technology spending, request pricing concessions or payment extensions, or seek renegotiation of their contracts. In addition, a portion of our revenue is related to usage of our platform in connection with live events, such as sporting events, that have continued to be impacted. Usage of our platform fluctuated following the implementation of preventative measures to contain or mitigate the outbreak of COVID-19, and we cannot predict how usage levels will continue to be impacted by these preventative measures. There is no assurance that customers will continue to use our platform, or to the same extent, as the COVID-19 pandemic begins to taper off or when it has ended. As a result, it has been difficult to accurately forecast our revenues or financial results, especially given that the near and long term impacts of the pandemic remain uncertain. Our results of operations could be materially below our forecasts, which could adversely affect our results of operations, disappoint analysts and investors, or cause our stock price to decline.
In response to the COVID-19 pandemic, many state, local, and foreign governments have put in place restrictions in order to control the spread of the disease. Such restrictions, or the perception that further restrictions could occur, have resulted in business closures, work stoppages, slowdowns and delays, work-from-home policies, travel restrictions, and cancellation or postponement of events, among other effects that impacted productivity and disrupted our operations and those of our partners and customers. For example, we experienced delays in the ramping of new traffic due to travel and data center restrictions in South Asia that delayed network build outs and the timing of customer code freezes, each affected in part due to COVID-19-related issues. In addition, our suppliers have been impacted by the COVID-19 pandemic, which has reduced the availability or
resulted in delays, and may continue to reduce the availability or result in delays, of parts and components to us. Our offices have remained temporarily closed since March 2020, and we have taken other precautionary measures, such as instituting protocols and guidelines for Fastly-related travel and shifting to hosting virtual Fastly-sponsored events in lieu of in-person events. We may take further actions that alter our operations as may be required by federal, state, or local authorities, or which we determine are in our best interests. While much of our operations can be performed remotely, certain activities such as expanding and maintaining our network of POPs around the world often require personnel to be on-site, and our ability to carry out these activities has been, and may continue to be, negatively impacted if our employees or local data center personnel are not able to travel. In addition, travel restrictions have affected our ability to conduct audits of our data centers and facilities, requiring us to use alternative procedures to the standard on-site visit. Any inability to complete these audits could affect our compliance certifications and cause customers to reduce or cease using our services. In addition, for activities that may be conducted remotely, there is no guarantee that we will be as effective while working remotely because our team is dispersed and many employees and their families have been negatively affected, mentally or physically, by the COVID-19 pandemic. Decreased effectiveness and availability of our team could adversely affect our results due to slow-downs in our sales cycles and our customer ramping and onboarding process, delays in recruiting and onboarding efforts, delays in our entry into customer contracts, delays in addressing performance issues, delays in product development, delays and inefficiencies among various operational aspects of our business, including our financial organization, or other decreases in productivity that could seriously harm our business. Moreover, our finance organization’s ability to ensure that we comply with the requirements of Section 404 may be impaired in the future, including the ability of our registered public accounting firm to issue an attestation report on management’s assessment of our internal control over financial reporting. Furthermore, we may decide to postpone or cancel planned investments in our business in response to changes in our business as a result of the spread of COVID-19, which may impact our ability to attract and retain customers and our rate of innovation, either of which could harm our business.
In addition, while the potential impact and duration of the COVID-19 pandemic on the global economy and our business in particular may be difficult to assess or predict, the pandemic has resulted in, and may continue to result in, significant disruption of global financial markets, and may reduce our ability to access additional capital, which could negatively affect our liquidity in the future.
The ultimate duration and extent of the impact from the COVID-19 pandemic depends on future developments that cannot be accurately forecasted at this time. These developments include the severity and transmission rate of the disease, the emergence of new variants, the actions of governments, businesses and individuals in response to the pandemic, the extent and effectiveness of containment actions and vaccines, the impact on economic activity and the impact of these and other factors. We do not yet know how businesses, customers, or our partners will operate in a post COVID-19 environment. There may be additional costs or impacts to our business and operations, including when we are able to return to our offices and resume in-person activities, travel, and events. In addition, there is no guarantee that a future outbreak of this or any other widespread epidemics will not occur, or that the global economy will recover, either of which could harm our business.
For additional details, refer to our risk factors included in Part I. Item 1A. of this Annual Report on Form 10-K.
Key Business Metrics
We regularly review a number of metrics, including the key metrics presented in the table below, to evaluate our business, measure our performance, identify trends affecting our business, prepare financial projections, and make strategic decisions. The calculation of the key metrics and other measures discussed below may differ from other similarly titled metrics used by other companies, securities analysts, or investors. Certain of our key metrics and financial results were favorably impacted by increases in traffic driven by the COVID-19 pandemic and our largest customer in 2020. In 2021, we saw some return to normal seasonal patterns of traffic and growth and an impact to our revenue from an outage in June 2021. We have
included Signal Sciences in our results of operations as of the acquisition date, October 1, 2020. For the year ended December 31, 2021, the results include the contribution of Signal Sciences for the full year.
Number of Customers
We believe that the number of customers is an important indicator of the adoption of our platform. Our definition of a customer consists of identifiable operating entities with which we have a billing relationship in good standing, from which we recognized revenue during the period. An identifiable operating entity is defined as a company, a government entity, or a distinct business unit of a larger company that has a relationship with Fastly through direct sale or through one of our reseller partners where charges are identified on an end-customer basis. In cases where charges are identified through a reseller partner rather than on an end-customer basis, we record a single customer record for the reseller partner. Our customer groupings may be impacted by changes to our customers’ business, including any impact from merger and acquisition activities, internal business reorganizations leading to operational and decision making changes, and corporate structure changes such as subsidiary consolidation and reorganization that may arise in the future. In addition to our paying customers, we also have trial, developer, nonprofit and open source programs, and other non-paying accounts that are excluded from our customer count metric. As of December 31, 2021 and 2020, we had 2,804 and 2,326 customers, respectively.
Number of Enterprise Customers
Historically our revenue has been driven primarily by a subset of customers who have leveraged our platform substantially from a usage standpoint. These enterprise customers are defined as customers with revenue in excess of $100,000 over the previous 12-month period. As of December 31, 2021, we had 445 enterprise customers which generated 88% of our revenue for the 12 months ended December 31, 2021. As of December 31, 2020, we had 378 enterprise customers which generated 89% of our revenue for the 12 months ended December 31, 2020. We believe the recruitment and cultivation of enterprise customers is critical to our long-term success.
Dollar-Based Net Expansion Rate ("DBNER")
Our ability to generate and increase our revenue is dependent upon our ability to increase the number of new customers and usage of our edge cloud delivery platform, security, and other products and services by our existing customers. We track our growth, in part, by measuring DBNER. Our DBNER increases when customers increase their usage of our platform or purchase additional products, and declines when they reduce their usage, benefit from lower pricing on their existing usage, or curtail their purchases of additional products. We believe DBNER is a key metric in measuring the long-term value of our customer relationships and our ability to grow our revenue through increased usage of our edge cloud delivery platform, security, and purchase of additional products and services by our existing customers. However, our calculation of DBNER indicates only expansion among continuing customers and does not indicate any decrease in revenue attributable to former customers, which may differ from similar metrics of other companies.
We calculate DBNER by dividing the revenue for a given period from customers who remained customers as of the last day of the given period ("current period") by the revenue from the same customers for the same period measured one year prior ("base period"). The revenue included in the current period excludes revenue from (i) customers that churned after the end of the base period and (ii) new customers that entered into a customer agreement after the end of the base period. For example, to calculate our DBNER for the 12 months ended December 31, 2021, we divide (i) revenue for the 12 months ended December 31, 2021, from customers that entered into a customer agreement prior to January 1, 2020, and that remained customers as of December 31, 2021, by (ii) revenue for the 12 months ended December 31, 2020 from the same set of customers.
For the 12 months ended December 31, 2021 and 2020 our DBNER was 120.9% and 143.6%, respectively. We believe that an annual cohort analysis of our customers demonstrates customer expansion. Once a customer begins to generate revenue for us, they tend to increase their usage of our platform, in particular in their second year. Customer accounts acquired in 2019, 2020, and 2021 are referred to as the 2019 Cohort, 2020 Cohort, and 2021 Cohort, respectively. As described above, our customers tend to increase their usage of our platform in their second year, which is typically followed by more modest increases in usage, if any, in ensuing years. For example, the DBNER for the 2019 Cohort was 580.8% for the year ended December 31, 2020. However, the DBNER for the 2019 Cohort was 150.8% for the year ended December 31, 2021, which generally represents their third year as a customer, depending on when they entered into a customer agreement. DBNER may fluctuate from quarter to quarter based on, among other things, the timing associated with new customer accounts. We expect our DBNER for individual cohorts to decrease once customers in that cohort have used our platform for more than two years and become a larger portion of both our overall customer base and the revenue that we use to calculate DBNER.
We separately monitor customer retention and churn on an annual basis by measuring our annual revenue retention rate, which we calculate by multiplying the final full month of revenue from a customer that terminated its contract with us (a "Churned Customer") by the number of months remaining in the same calendar year ("Annual Revenue Churn"). The quotient of the Annual Revenue Churn from all of our Churned Customers divided by our annual revenue of the same calendar year is then subtracted from 100% to determine our annual revenue retention rate. We believe this calculation is helpful in that it is based on the amount of revenue that we would expect to have received in the remaining portion of a particular period had a customer not terminated its contract with us. It is not indicative of the actual revenue contribution from churned customers in past periods. By comparing this amount to actual revenue for the period, we are able to assess our ability to replace terminated revenue by generating revenue from new and continuing customers. Our annual revenue retention rate for the years ended December 31, 2021 and 2020 was 99.2% and 99.3%, respectively.
Net Retention Rate ("NRR") and Last-Twelve Months Net Retention Rate ("LTM NRR")
Our ability to generate and increase our revenue is also dependent upon our ability to retain our existing customers. In addition to measuring expansion using DBNER, NRR and LTM NRR also allow us to track customer retention which demonstrates the stickiness of our edge cloud platform.
Our NRR measures the net change in monthly revenue from existing customers in the last month of the period (the “current" period month) compared to the last month of the same period one year prior (the “prior" period month) and includes revenue contraction due to billing decreases or customer churn, revenue expansion due to billing increases, but excludes revenue from new customers. We calculate Net Retention Rate by dividing the revenue from the current period month by the revenue in the prior period month. For the last month of the years ended December 31, 2021 and 2020 our NRR was 106.6% and 116.3%, respectively.
Our LTM NRR is intended to be supplemental to our NRR as we believe that it removes some of the volatility that is inherent in a usage-based business model. We calculate LTM NRR by dividing the total customer revenue for the prior twelve-month period (“prior 12-month period”) ending at the beginning of the last twelve-month period (“LTM period”) minus revenue contraction due to billing decreases or customer churn, plus revenue expansion due to billing increases during the LTM period from the same customers by the total prior 12-month period revenue. For the last month of the years ended December 31, 2021 and 2020 our LTM NRR was 117.6% and 137.4%, respectively.
Key Components of Statement of Operations
Revenue
We derive our revenue primarily from usage-based fees earned from customers using our platform. We also earn fixed-rate recurring revenue from security and other products and services.
Our usage-based fees earned from customers using our platform are generally billed in arrears. Our security products are primarily annual subscriptions that are billed in advance. Many customers have tiered usage pricing which reflects discounted rates as usage increases. For most contracts, usage charges are determined on a monthly basis based on actual usage within the month and do not impact usage charges within any other month. Our larger customers often enter into contracts that contain minimum billing commitments and reflect discounted pricing associated with such usage levels.
We define United States revenue as revenue from customers that have a billing address in the United States, and we define international revenue as revenue from customers that have a billing address outside of the United States.
Cost of Revenue and Gross Margin
Cost of revenue consists primarily of fees paid for bandwidth, peering, and colocation. Cost of revenue also includes personnel costs, such as salaries, benefits, bonuses, and stock-based compensation for our customer support and infrastructure employees, and non-personnel costs, such as amortization of capitalized internal-use software development costs, depreciation of our network equipment and amortization of our intangible assets. Our arrangements with network service providers require us to pay fees based on bandwidth use, in some cases subject to minimum commitments, which may be underutilized. We expect our cost of revenue to continue to increase on an absolute basis and may increase as a percentage of revenue.
Our gross margin has been and will continue to be affected by a number of factors, including utilization of our network, the timing of investments in the expansion of our network, which can increase depreciation and colocation costs in advance of expected demand, our ability to manage our network service providers and cloud infrastructure-related fees, the timing of amortization of capitalized software development costs, changes in personnel costs to provide customer support and operate the network, and customer pricing.
Research and Development
Research and development expenses consist primarily of personnel costs, including salaries, benefits, bonuses, and stock-based compensation. Research and development expenses also include cloud infrastructure fees for development and testing, and an allocation of our general overhead expenses. We capitalize the portion of our software development costs that meet the criteria for capitalization.
We continue to focus our research and development efforts on adding new features and products including new use cases, improving the efficiency and performance of our network, and increasing the functionality of our existing products. Over the long term we expect our research and development expenses to decrease as a percentage of our revenue. However, our research and development expenses may fluctuate as a percentage of our revenue from period to period due to the timing and extent of these expenses.
Sales and Marketing
Sales and marketing expenses consist primarily of personnel costs, including commissions for our sales employees, salaries, benefits, bonuses, and stock-based compensation. Sales and marketing expenses also include expenditures related to advertising, marketing, our brand awareness activities, costs related to our customer conferences, including our Altitude conference, professional services fees, amortization of our intangible assets and an allocation of our general overhead expenses.
We focus our sales and marketing efforts on generating awareness of our company, platform and products, creating sales leads, and establishing and promoting our brand, both domestically and internationally. We plan to increase our investment in sales and marketing by hiring additional sales and marketing personnel, expanding our sales channels, driving our go-to-market strategies, building our brand awareness, and sponsoring additional marketing events. Over the long term, we expect our sales and marketing expenses to decrease as a percentage of our revenue. However, our sales and marketing expenses may fluctuate as a percentage of our revenue from period to period due to the timing and extent of these expenses.
General and Administrative
General and administrative expenses consist primarily of personnel costs, including salaries, benefits, bonuses, and stock-based compensation for our accounting, finance, legal, trust, human resources and administrative support personnel, and executives. General and administrative expenses also include costs related to legal and other professional services fees, sales and other taxes, an allocation of our general overhead expenses, credit loss expense and acquisition-related costs. We expect that we will incur costs associated with supporting the growth of our business, our operation as a public company, and to meet the increased compliance requirements associated with our international expansion.
Our general and administrative expenses include a significant amount of sales and other taxes to which we are subject based on the manner we sell and deliver our products. Historically, we have not collected such taxes from our customers and
have therefore recorded such taxes as general and administrative expenses. We expect that these expenses will decline in future years as we continue to implement our sales tax collection mechanisms and start collecting these taxes from our customers.
Overall, we expect our general and administrative expenses to continue to increase on an absolute basis and may increase as a percentage of revenue in future periods. Over the long term, we expect our general and administrative expenses to decrease as a percentage of our revenue.
Income Taxes
Our income tax expense consists primarily of income taxes in certain foreign jurisdictions where we conduct business and state minimum income taxes in the United States. In 2020, our income tax benefit was primarily the result of a reduction in the valuation allowance recorded against our net deferred tax assets. In connection with the acquisition of Signal Science in 2020, we recorded a net deferred tax liability which provides an additional source of taxable income to support the realization of the pre-existing deferred tax assets. We have a valuation allowance for deferred tax assets, including net operating loss carryforwards. We expect to maintain this valuation allowance for the foreseeable future.
Results of Operations
In this section, we discuss the results of our operations for the year ended December 31, 2021 compared to the year ended December 31, 2020. For a discussion of the year ended December 31, 2020 compared to the year ended December 31, 2019, please refer to Part II, Item 7, "Management's Discussion and Analysis of Financial Condition and Results of Operations" in our Annual Report on Form 10-K for the year ended December 31, 2020. Certain of our key metrics and financial results were favorably impacted by increases in traffic driven by the COVID-19 pandemic and our largest customer in 2020. In 2021, we saw some return to normal seasonal patterns of traffic and growth and an impact to our revenues from an outage in June 2021. We have included Signal Sciences in our results of operations as of the acquisition date, October 1, 2020. For the year ended December 31, 2020, the information presented in this section includes the contribution of Signal Sciences starting from October 1, 2020. For the year ended December 31, 2021, the results include the contribution of Signal Sciences for the full year. As a result, comparisons to the prior-year period may not be indicative of future results or future rates of growth.
__________
(1)Includes stock-based compensation expense as follows:
__________
* Columns may not add up to 100% due to rounding.
Revenue
2021 compared to 2020
Revenue was $354.3 million for the year ended December 31, 2021 compared to $290.9 million for the year ended December 31, 2020, an increase of $63.5 million, or 22%. Revenue growth was driven by impact of a full year of revenue generated from products acquired from the acquisition of Signal Sciences, which increased by $31.7 million before considering the effect of purchase accounting adjustments, and the further adoption of our modern edge platform and products. Revenue growth was offset by a $4.2 million impact of purchase price accounting adjustments, which represents a $2.2 million increase from 2020.
We had 2,804 customers and 445 enterprise customers as of December 31, 2021. We had 2,326 customers and 378 enterprise customers as of December 31, 2020. This represents an increase of 478, or 21%, in customers and 67, or 18%, in enterprise customers from December 31, 2020.
Approximately 93% of our revenue in the year ended December 31, 2021 was driven by usage on our platform, primarily from existing customers, as revenue from new customers contributed less than 10% of our revenue. The proportion of the revenue contribution between new and existing customers is consistent with typical customer behavior as customers tend to contribute more revenue over time as their use of the platform increases. The remainder of our revenue was generated by our other products and services, including support and professional services.
United States revenue was $260.4 million and 73% of revenue for the year ended December 31, 2021, and $196.5 million and 68% of revenue for the year ended December 31, 2020. This represents an increase of $63.9 million, or 32%. International revenue was $93.9 million and 27% of revenue for the year ended December 31, 2021, and $94.3 million and 32% of revenue for the year ended December 31, 2020. This represents an increase of $(0.4) million, or 0%.
We had 2,111 domestic customers and 691 international customers as of December 31, 2021.
Cost of Revenue
2021 compared to 2020
Cost of revenue was $167.0 million for the year ended December 31, 2021 compared to $120.0 million for the year ended December 31, 2020, an increase of $47.0 million, or 39%. This is primarily due to an increase in bandwidth costs of $11.1 million, an increase in colocation costs of $6.4 million, and an increase in other network costs of $5.4 million to support the increased traffic on our platform. There was an increase in depreciation and amortization expense of $17.0 million as we continue to invest in our platform, which includes a $7.5 million increase in amortization of intangible assets acquired from the Signal Sciences acquisition. There was also a $7.9 million increase in personnel related costs, such as salaries, benefits, bonuses, and stock-based compensation, due to the increased headcount to support the growth of our business.
Gross Profit and Gross Margin
2021 compared to 2020
Gross profit was $187.3 million for the year ended December 31, 2021 compared to $170.9 million for the year ended December 31, 2020, an increase of $16.5 million, or 10%. Gross margin was 53% for the year ended December 31, 2021 compared to 59% for the year ended December 31, 2020, an decrease of 6%. The decrease in gross margin reflects a decrease in network utilization in 2021 compared to 2020 related to increased traffic in 2020 driven by the COVID-19 pandemic and the company's largest customer in 2020 and the impact of an increase in investment in infrastructure and capacity made in advance of expected demand. The decline in gross margin also reflects the impact of an increase of $2.2 million of revenue reductions for purchase accounting adjustments and additional $7.5 million of amortization of intangible assets related to our acquisition of Signal Sciences. The impact of these adjustments was a reduction in gross margin of 2.7%.
Operating Expenses
Research and development-2021 compared to 2020
Research and development expenses were $126.9 million for the year ended December 31, 2021 compared to $74.8 million for the year ended December 31, 2020, an increase of $52.0 million, or 70%. This is primarily due to an increase of $56.1 million of personnel-related costs, such as salaries, benefits, bonuses, and stock-based compensation due to an increase in headcount and new equity awards granted to employees. The increase in personnel-related costs was primarily driven by the impact of a full year of Signal Sciences expenses. There was also an increase of $3.6 million in hosted data service and other SaaS costs as we continue to continue to develop new products and features for our next-generation edge computing solutions. These increases are partially offset by a $9.6 million increase in capitalization of costs related to the development of internal-use software.
Sales and marketing-2021 compared to 2020
Sales and marketing expenses were $152.6 million for the year ended December 31, 2021 compared to $101.2 million for the year ended December 31, 2020, an increase of $51.5 million, or 51%. This is primarily due to a $33.1 million increase in personnel related costs, such as salaries, sales commissions, benefits, and stock-based compensation, due to an increase in headcount and new equity awards granted to employees. The increase in personnel-related costs was primarily driven by the impact of a full year of Signal Sciences expenses. We also had an increase of $8.4 million in external marketing spend primarily related to various marketing campaigns and an increase of $8.3 million in amortization expense related to certain intangible assets acquired in connection with the Signal Sciences acquisition.
General and administrative-2021 compared to 2020
General and administrative costs were $126.8 million for the year ended December 31, 2021 compared to $102.1 million for the year ended December 31, 2020, an increase of $24.8 million, or 24%. This is primarily due to an increase of $36.1 million in personnel related costs, such as salaries, benefits, and stock-based compensation due to an increase in headcount and new equity awards granted to employees, increases of $1.6 million in software licenses, and $1.3 million in business insurance costs. These increases are partially offset by a $13.4 million decrease in professional services spending primarily driven by a decrease in acquisition-related expenses of $16.9 million, and a $1.5 million decrease in expense for credit losses.
Other Income and Expense
Interest Income
2021 compared to 2020
Interest income was $1.3 million for the year ended December 31, 2021 compared to $1.6 million for the year ended December 31, 2020, a decrease of $0.3 million, or 21%. This decrease is due to a reduction in interest rates on our cash balances and investments portfolio.
Interest Expense
2021 compared to 2020
Interest expense was $5.2 million for the year ended December 31, 2021 compared to $1.5 million for the year ended December 31, 2020, an increase of $3.7 million, or 239%. This increase is primarily due the amortization of debt issuance costs related to the convertible debt and revolving credit facility.
Other income(expense), net
2021 compared to 2020
Other income, net was $0.4 million for the year ended December 31, 2021 compared to other expense, net, of $0.3 million for the year ended December 31, 2020, a change of $0.6 million, or 228%. The increase is mainly driven by our foreign currency transaction gains and losses between the periods.
Income Tax Expense (Benefit)
2021 compared to 2020
Income tax expense was 0.1 million for the year ended December 31, 2021 compared to income tax benefit of for the year ended December 31, 2020, a decrease of $11.6 million or 101% decrease is primarily due to a one-time tax benefit from the reduction in our valuation allowance recorded against our net deferred tax assets. In connection with the acquisition of Signal Science, we recorded a net deferred tax liability which provides an additional source of taxable income to support the realization of the pre-existing deferred tax assets. As a result a portion of our valuation allowance was released and we recorded a $13.0 million tax benefit in the year ended December 31, 2020.
Liquidity and Capital Resources
As of December 31, 2021, we had cash, cash equivalents, and marketable securities totaling $1,056.8 million. Our cash, cash equivalents, and marketable securities primarily consisted of bank deposits and money market funds held at major financial institutions and investment-grade commercial paper and corporate debt securities. As of December 31, 2021, we had $528.9 million of marketable securities classified as long term investments.
On May 21, 2019, upon the completion of our IPO, we received net proceeds of $192.5 million, after deducting underwriting discounts and commissions, from sales of 12,937,500 shares of our Class A common stock in the IPO. The net proceeds include additional proceeds of $25.1 million, net of underwriters' discounts and commissions, from the exercise of the underwriters' option to purchase an additional 1,687,500 shares of our Class A common stock.
On May 26, 2020, we completed a follow-on public offering in which we sold 6,900,000 shares of Class A common stock, which included 900,000 shares sold pursuant to the exercise by the underwriters of an option to purchase additional shares, at the public offering price of $41.50 per share. We received net proceeds of $274.9 million, after deducting underwriting discounts and commissions, from sales of our shares in the public offering.
In March 2021, we entered into a purchase agreement for the sale of an aggregate of $948.8 million principal amount of our 0% convertible senior notes due 2026 (the “Notes”). The Notes mature on March 25, 2026, unless earlier converted, redeemed or repurchased. The net proceeds from the issuance of the Notes were approximately $930.0 million after deducting the initial purchasers’ discounts and transaction costs.
To date, we have financed our operations primarily through equity issuances, payments received from customers, the net proceeds we received through sales of equity and debt securities and borrowings under our credit facilities. Our principal uses of cash in recent periods have been funding our operations and capital expenditures. We also enter into finance leases to finance our infrastructure assets in co-location facilities that we directly lease and operate. We have not entered into any off-balance sheet arrangements and do not have any holdings in variable interest entities.
We believe that our cash, cash equivalents balances, marketable securities, and our credit facilities, and the cash flows generated by our operations will be sufficient to satisfy our anticipated cash needs for working capital and capital expenditures for at least the next 12 months. We have generated losses from operations in the past and expect to continue to incur operating losses for the foreseeable future due to the investments we intend to make and may require additional capital resources to execute strategic initiatives to grow our business.
We believe we will meet longer-term expected future cash requirements and obligations, through a combination of cash flows from operating activities, available balances of cash, cash equivalents and marketable securities and available credit under our credit facilities. In addition, we may engage in equity or debt financings to secure additional funds. As noted above, our Notes mature on March 25, 2026, and if we are required to repay the Notes or if we are unable to generate sufficient cash flow to service our debt, we may be required to adopt one or more alternatives, such as selling assets, restructuring debt or obtaining additional equity capital on terms that may be onerous or highly dilutive.
As of December 31, 2021, we had $55.4 million of commitments for capital expenditures which will primarily be financed through finance leases under our existing under our existing agreements.
Cash Collateralized Revolving Credit Agreement
We have a finance lease agreement with an equipment provider that provides financing for up to $90 million in network equipment. Individual leases have average an interest rate of 4.8% and terms of three years. The agreement provides for bargain purchase prices at the end of the terms. The amortization of leased assets is included in depreciation and amortization expense.
On February 16, 2021, we entered into a Senior Secured Credit Facilities Agreement ("Credit Agreement") with Silicon Valley Bank for an aggregate commitment amount of $100.0 million. The Credit Agreement bears interest at a rate per annum equal to the sum of LIBOR for the applicable interest period plus 1.75% - 2.00%, depending on the average daily outstanding balance of all loans and letters of credit under the Credit Agreement. Interest payments on outstanding borrowings are due on the last day of each interest period. The Credit Agreement has a commitment fee on the unused portion of the borrowing commitment, which is payable on the last day of each calendar quarter at a rate per annum of 0.20% - 0.25% depending on the average daily outstanding balance of all loans and letters of credit under the Credit Agreement. The agreement allows for use of an alternative interest rate. In addition, our Credit Agreement contains a financial covenant that requires us to maintain a consolidated adjusted quick ratio of at least 1:25 to 1:00 tested on a quarterly basis as well as a springing revenue growth covenant for certain periods if our consolidated adjusted quick ratio falls below 1.75 to 1:00 on the last day of any fiscal quarter.
Cash Flows
The following table summarizes our cash flows for the period indicated:
Cash Flows from Operating Activities
For the year ended December 31, 2021, cash used in operating activities consisted primarily of our net loss of $222.7 million adjusted for non-cash items, including $28.8 million of depreciation and amortization, $21.2 million of amortization related to acquired intangibles, $140.5 million of stock-based compensation expense, $26.9 million of lease amortization expense, amortization of deferred contract costs of $6.3 million and amortization of debt issuance costs of $3.2 million. With respect to changes in operating assets and liabilities, there was an increase in accounts receivable of $14.6 million, primarily due to an increase in revenue and the timing of cash receipts from certain of our larger customers and an increase of $15.2 million in prepaid expenses and other assets due to pre-payments for software licenses. We also had $26.4 million of operating lease payments. This was partially offset by increases of $4.3 million in accrued expenses and $8.9 million in other liabilities due to timing of payments.
For the year ended December 31, 2020, cash used in operating activities consisted primarily of our net loss of $95.9 million adjusted for non-cash items, including $20.0 million of depreciation and amortization, $5.1 million of amortization related to acquired intangibles, $64.4 million of stock-based compensation expense, $21.8 million of lease amortization expense, amortization of deferred contract costs of $3.5 million and allowance for credit losses of $1.7 million. This was partially offset by $13.0 million in tax benefits related to release of valuation allowance related to deferred taxes associated with the Signal Sciences acquisition. With respect to changes in operating assets and liabilities, there was a decrease in accounts receivable of $9.3 million, primarily due to increased collections due to the growth of our business and the timing of cash receipts from certain of our larger customers, and $22.7 million in prepaid expenses and other assets due to pre-payments for software licenses. We also had $18.3 million of operating lease payments. This was partially offset by an increase of $22.0 million in accounts payable, accrued expenses, and other liabilities due to timing of payments.
For the year ended December 31, 2019, cash used in operating activities consisted primarily of our net loss of $51.6 million adjusted for non-cash items, including $16.6 million of depreciation and amortization, $12.1 million of stock-based compensation expense, $2.3 million of amortization of deferred contract costs, $0.7 million of amortization of deferred rent, an increase in the fair value of our common stock warrants of $2.4 million, and amortization of debt issuance costs of $1.9 million.
With respect to changes in operating assets and liabilities, there was an increase in accounts receivable of $12.8 million, primarily due to the growth of our business and the timing of cash receipts from certain of our larger customers, an increase in other long-term assets of $3.9 million due to the adoption of Accounting Standards Update No. 2014-09, Revenue from Contracts with Customers, and an increase of $2.7 million in prepaid expenses and other assets due to pre-payments for software licenses.
Cash Flows from Investing Activities
For the year ended December 31, 2021, cash used in investing activities was $794.5 million, primarily consisting of $928.2 million in purchases of marketable securities, $34.8 million of payments related to purchases of property and equipment to expand our network, $13.5 million of additions to capitalized internal-use software. This was offset by $184.6 million of maturities and sales of marketable securities.
For the year ended December 31, 2020, cash used in investing activities was $275.0 million, primarily consisting of $269.1 million in purchases of marketable securities, $201.0 million of business acquisitions, net of cash acquired, $29.6 million of payments related to purchases of property and equipment to expand our network, $6.1 million of additions to capitalized internal-use software, and $1.8 million of purchases of intangible assets. This was offset by $232.0 million of maturities and sales of marketable securities.
For the year ended December 31, 2019, cash used in investing activities was $87.7 million, primarily consisting of $191.0 million in purchases of marketable securities, $14.6 million of payments related to purchases of property and equipment to expand our network, and $4.9 million of additions to capitalized internal-use software. This was offset by $123.4 million of maturities of marketable securities.
Cash Flows from Financing Activities
For the year ended December 31, 2021, cash provided by financing activities was $936.6 million, primarily consisting of $930.8 million of proceeds from the issuance of the Notes, net of issuance costs, $8.1 million in proceeds from the employee stock purchase plan ("ESPP") and $12.6 million in proceeds from stock option exercises by our employees and directors. This was partially offset by $13.6 million of finance lease liabilities repayments.
For the year ended December 31, 2020, cash provided by financing activities was $272.7 million, primarily consisting of $274.9 million in proceeds from our follow-on public offering, net of underwriting fees, $9.3 million in proceeds from the ESPP, and $15.3 million in proceeds from stock option exercises by our employees and directors. This was partially offset by $20.3 million of debt repayments, $5.8 million of finance lease liabilities repayments, and $0.7 million of payments of costs related to our follow-on public offering.
For the year ended December 31, 2019, cash provided by financing activities was $168.1 million, primarily consisting of $192.5 million in proceeds from our IPO, net of underwriting fees, $5.4 million in proceeds from the ESPP, $6.1 million in proceeds from stock option exercises by our employees and directors. This was partially offset by $29.1 million of net debt repayments, $5.5 million of payments of costs related to our IPO, and $1.4 million of finance lease liabilities repayments.
Contractual Obligations and Other Commitments
The following table summarizes our non-cancelable contractual obligations as of December 31, 2021:
__________
(1) Purchase obligations-non equipment represent total future minimum payments under contracts with our cloud infrastructure provider, network service providers, and other vendors. Purchase obligations exclude agreements that are cancellable without penalty. Our purchase obligations exclude our operating lease commitments associated with our colocation arrangements which have been separately disclosed under our operating lease commitments.
(2) Purchase obligations-equipment represent total future minimum payments under contracts for capital expenditures which will primarily be financed through finance leases under our existing agreements.
(3) Operating lease obligations represent total future minimum rent payments under non-cancelable operating lease agreements, such as our facilities and colocation (i.e. data center) leases.
(4) Finance lease obligations represents principal and interest payments under our networking equipment leases.
(5) Debt obligation aggregate principal amount of our 0% convertible senior notes due on March 15, 2026.
These commitments will be generally be settled with existing cash on hand and cash generated from operations. Purchase obligations for capital equipment will be primarily settled by additional finance lease borrowings.
Critical Accounting Policies and Estimates
We prepare our consolidated financial statements in accordance with U.S. GAAP. The preparation of our consolidated financial statements requires us to make estimates, judgments, and assumptions that affect the reported amounts of assets, liabilities, revenue, costs, expenses, and related disclosures. Actual results and outcomes could differ significantly from our estimates, judgments, and assumptions. To the extent that there are material differences between these estimates and actual results, our future financial statement presentation, financial condition, results of operations, and cash flows will be affected.
Revenue Recognition
Revenue is recognized upon transfer of control of promised products or services to customers in an amount that reflects the consideration we expect to receive in exchange for those products or services. The processing and recording of certain revenue requires a manual process, which uses a complex set of procedures to generate complete and accurate data to record these revenue transactions. We enter into contracts that can include various combinations of products and services, each of which are distinct and accounted for as separate performance obligations. Revenue is recognized net of any taxes collected from customers, which are subsequently remitted to governmental authorities.
A performance obligation is a promise in a contract to transfer a distinct good or service to the customer and is the unit of account. Our contracts with customers often include promises to transfer multiple products and services to a customer. Determining whether products and services are considered distinct performance obligations that should be accounted for separately versus together may require significant judgment. For contracts with multiple performance obligations, we allocate the contract transaction price to each performance obligation using our estimate of the standalone selling price ("SSP") of each distinct good or service in the contract.
Judgment is required to determine the SSP for each distinct performance obligation. We analyze separate sales of our products and services as a basis for estimating the SSP of our products and services. We then use the SSP as the basis for allocating the transaction price when our product and services are sold together in a contract with multiple performance obligations. In instances where SSP is not directly observable, such as when we do not sell the product or service separately, we
determine the SSP using information that may include market conditions and other observable inputs. We typically have more than one SSP for individual products and services due to the stratification of those products and services by customers and circumstances. In these instances, we may use information, such as geographic region and distribution channel, in determining the SSP.
The transaction price in a contract for usage-based services is typically equal to the minimum commit price in the contract less any discounts provided. The transaction price in a contract that does not contain usage-based services is equal to the total contract value. Because our typical contracts represent distinct services delivered over time with the same pattern of transfer to the customer, usage-based consideration primarily related to actual consumption over the minimum commit levels is allocated to the period to which it relates. The amount of consideration recognized for usage above the minimum commit price is limited to the amount we expect to be entitled to receive in exchange for providing services. We have elected to apply the practical expedient for estimating and disclosing the variable consideration when variable consideration is allocated entirely to a wholly unsatisfied performance obligation or to a wholly unsatisfied promise to transfer a distinct good or service that forms part of a single performance obligation from our remaining performance obligations under these contracts.
Performance obligations represent stand-ready obligations that are satisfied over time as the customer simultaneously receives and consumes the benefits provided by us. These obligations can be content delivery, security, subscription services, professional services, support, edge cloud platform services, and others. Accordingly, our revenue is recognized over time, consistent with the pattern of benefit provided to the customer over the term of the agreement.
At times, customers may request changes that either amend, replace, or cancel existing contracts. Judgment is required to determine whether the specific facts and circumstances within the contracts should be accounted for as a separate contract or as a modification.
In contracts where there are timing differences between when we transfer a promised good or service to the customer and when the customer pays for that good or service, we have determined our contracts do not include a significant financing component. We have also elected the practical expedient to not measure financing components for any contract where the timing difference is less than one year.
Stock-Based Compensation
We account for stock-based employee compensation plans under the fair value recognition and measurement provisions, which require all stock-based payments, including grants of stock options, restricted stock units ("RSUs"), restricted stock awards ("RSAs"), performance stock awards ("PSUs") and shares issued under our Employee Stock Purchase Plan ("ESPP") to be measured based on the grant-date fair value of the award and recognized as expense over the requisite service period, which is generally the vesting period of the respective award. We account for forfeitures as they occur.
The fair value of RSUs and RSAs granted to our employees and directors is based on the grant date fair value. The fair value of PSUs granted to our employees is based on the fair value determined when the performance metrics were set. The fair value of stock options granted to our employees and directors, and of the shares to be issued under our ESPP are based on the Black-Scholes option-pricing model. The determination of the fair value of a stock-based award is affected by the deemed fair value of the underlying stock price on the grant date, as well as assumptions regarding a number of other complex and subjective variables. These variables include the fair value of our common stock, the expected stock price volatility over the expected term of the options, stock option exercise and cancellation behaviors, risk-free interest rates, and expected dividends:
These assumptions and estimates are as follows:
•Fair Value of Common Stock. We use the market closing price of our Class A common stock, as reported on the New York Stock Exchange, for the fair value. Prior to our IPO, our board of directors considered numerous objective and subjective factors to determine the fair value of our common stock at each meeting at which awards are approved. These factors included, but were not limited to (i) contemporaneous third-party valuations of Common Stock; (ii) the rights and preferences of Series Preferred relative to Common Stock; (iii) the lack of marketability of Common Stock; (iv) developments in the business; and (v) the likelihood of achieving a liquidity event, such as an IPO or sale of the Company, given prevailing market conditions.
•Expected Term. The expected term represents the period that our stock-based awards are expected to be outstanding. The expected term assumptions were determined based on the vesting terms, exercise terms, and contractual lives of the options. The expected term was estimated using the simplified method allowed under Securities and Exchange Commission (SEC) guidance.
•Volatility. The expected volatility is derived from an average of the historical stock volatilities of the common stock of the Company. In prior years the expected volatility calculation also included the historical stock volatilities of comparable companies as we did not have a long enough trading history of our common stock . Comparable companies consist of public companies in our industry, which are similar in size, stage of life cycle, and financial leverage.
•Risk-free Interest Rate. The risk-free interest rate used in the Black-Scholes option pricing model is the implied yield available on U.S. Treasury zero-coupon issues with a remaining term equivalent to that of the options for each expected term.
•Dividend Yield. The expected dividend assumption is based on our current expectations of our anticipated dividend policy. We have no history of paying any dividends and therefore used an expected dividend yield of zero.
Valuation of Goodwill and Other Acquired Intangible Assets in Business Combination
Accounting for business combinations requires us to make significant estimates and assumptions, especially at the acquisition date with respect to tangible and intangible assets acquired and liabilities assumed. We use our best estimates and assumptions to accurately assign fair value to the tangible and intangible assets acquired and liabilities assumed at the acquisition date as well as the useful lives of those acquired intangible assets. Examples of critical estimates in valuing certain of the intangible assets and goodwill we have acquired include but are not limited to future expected cash flows from acquired developed technologies; the acquired company’s trade name, existing customer relationships and backlog. These estimates are inherently uncertain and unpredictable, and if different estimates were used the purchase price for the acquisition could be allocated to the acquired assets and liabilities differently from the allocation that we have made. Additionally, unanticipated events and circumstances may occur, which may affect the accuracy or validity of such assumptions, estimates or actual results.
The authoritative guidance allows a measurement period of up to one year from the date of acquisition to make adjustments to the preliminary allocation of the purchase price. As a result, during the measurement period we may record adjustments to the fair values of assets acquired and liabilities assumed, with the corresponding offset to goodwill to the extent that it identifies adjustments to the preliminary purchase price allocation. Upon conclusion of the measurement period or final determination of the values of the assets acquired and liabilities assumed, whichever comes first, any subsequent adjustments will be recorded to the Consolidated Statement of Operations.
Impairment of Goodwill, Intangible Assets and Other Long-Lived Assets
Goodwill is the amount by which the cost of acquired net assets in a business combination exceeds the fair value of the net identifiable assets on the date of purchase and is carried at its historical cost. We test goodwill for impairment on an annual basis or more frequently if events or changes in circumstances indicate that the asset might be impaired. We determined that we operate as one reporting unit and we perform our annual impairment test of goodwill as of October 31 and whenever events or circumstances indicate that the asset might be impaired.
Long-lived assets, including property and equipment and intangible assets, are reviewed for impairment whenever events or changes in circumstances, such as service discontinuance, technological obsolescence, significant decreases in our market capitalization, facility closures, or work-force reductions indicate that the carrying amount of the long-lived asset or asset group may not be recoverable. When such events occur, we compare the carrying amount of the asset or asset group to the undiscounted expected future cash flows related to the asset or asset group. If this comparison indicates that an impairment is present, the amount of the impairment is calculated as the difference between the carrying amount and the fair value of the asset or asset group.
Leases
We lease office space and data centers ("Colocation leases") under non-cancelable operating leases with various expiration dates through 2027. We also lease server equipment under non-cancelable operating finance leases with various expiration dates through 2024. We determine if an arrangement contains a lease at inception.
Operating lease right-of-use assets and lease liabilities are recognized at the present value of the future lease payments at commencement date. The interest rate implicit in our operating leases is not readily determinable, and therefore an incremental borrowing rate is estimated to determine the present value of future payments. The estimated incremental borrowing rate factors in a hypothetical interest rate on a collateralized basis with similar terms, payments, and economic environments. Operating lease right-of-use assets also include any prepaid lease payments and lease incentives.
Certain of the operating lease agreements contain rent concession, rent escalation, and option to renew provisions. Rent concession and rent escalation provisions are considered in determining the single lease cost to be recorded over the lease term. Single lease cost is recognized on a straight-line basis over the lease term commencing on the date we have the right to use the leased property. The lease terms may include options to extend or terminate the lease. We generally use the base, non-cancelable, lease term when recognizing the lease assets and liabilities, unless it is reasonably certain that the option will be exercised. Our lease agreements may contain variable costs such as common area maintenance, operating expenses or other costs. Variable lease costs are expensed as incurred on the consolidated statements of operations. Our lease agreements generally do not contain any residual value guarantees or restrictive covenants.
We lease networking equipment from a third party, through equipment finance leases. These leases include a bargain purchase option, resulting in a full transfer of ownership at the completion of the lease term.
Operating leases are reflected in operating lease right-of-use assets, operating lease liabilities, and operating lease liabilities, non-current on our consolidated balance sheets. Finance leases are included in property and equipment, net, finance lease liabilities, and finance lease liabilities, non-current on our consolidated balance sheets.
Internal-Use Software Development Costs
Labor and related costs associated with internal-use software during the application development stage are capitalized. Capitalization of costs begins when the preliminary project stage is completed, management has committed to funding the project, and it is probable that the project will be completed and the software will be used to perform the function intended. Capitalization ceases at the point when the project is fully tested and substantially complete and is ready for its intended purpose. The capitalized amounts are included in property and equipment, net on the Consolidated Balance Sheets. We amortize such costs over the estimated useful life of the software; completed internal-use software that is used on our network is amortized to cost of revenue over its estimated useful life. Costs incurred during the planning, training, and post-implementation stages of the software development life-cycle are expensed as incurred.
Legal and Other Contingencies
From time to time, we have been and will continue to be subject to legal proceedings and claims. Periodically, we evaluate the status of each legal matter and assess our potential financial exposure. If the potential loss from any legal proceeding or litigation is considered probable and the amount can be reasonably estimated, we accrue a liability for the estimated loss. Significant judgment is required to determine the probability of a loss and whether the amount of the loss is reasonably estimable. The outcome of any proceeding is not determinable in advance. As a result, the assessment of a potential liability and the amount of accruals recorded are based only on the information available to us at the time. As additional information becomes available, we reassess the potential liability related to the legal proceeding or litigation, and may revise our estimates. Any revisions could have a material effect on our results of operations.
Please refer to Note 10-Commitments and Contingencies for discussion around our legal proceedings.
We conduct operations in many tax jurisdictions throughout the United States. In many of these jurisdictions, non-income-based taxes, such as sales and use and telecommunications taxes are assessed on our operations. We are subject to indirect taxes, and may be subject to certain other taxes, in some of these jurisdictions. Historically, we have not billed or collected these taxes and, in accordance with U.S. GAAP, we have recorded a provision for our tax exposure in these jurisdictions when it is both probable that a liability has been incurred and the amount of the exposure can be reasonably estimated. As a result, we have recorded a liability of $7.5 million as of December 31, 2021. These estimates are based on
several key assumptions, including the taxability of our products, the jurisdictions in which we believe we have nexus and the sourcing of revenues to those jurisdictions. In the event these jurisdictions challenge our assumptions and analysis, our actual exposure could differ materially from our current estimates.
Recent Accounting Pronouncements
Please refer to Note 2-Summary of Significant Accounting Policies included in the Notes to Consolidated Financial Statements.